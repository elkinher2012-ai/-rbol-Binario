import java.util.Scanner;

// Clase Nodo del árbol
class Nodo {
    int valor;
    Nodo izquierda, derecha;

    public Nodo(int valor) {
        this.valor = valor;
        izquierda = derecha = null;
    }
}

// Clase Árbol Binario
class ArbolBinario {
    Nodo raiz;

    // Insertar un valor en el árbol
    public void insertar(int valor) {
        raiz = insertarRec(raiz, valor);
    }

    private Nodo insertarRec(Nodo nodo, int valor) {
        if (nodo == null) {
            nodo = new Nodo(valor);
            return nodo;
        }
        if (valor < nodo.valor) {
            nodo.izquierda = insertarRec(nodo.izquierda, valor);
        } else if (valor > nodo.valor) {
            nodo.derecha = insertarRec(nodo.derecha, valor);
        } // si es igual, no lo inserta (para evitar duplicados)
        return nodo;
    }

    // Mostrar recorrido inorden
    public void mostrarInorden() {
        System.out.print("Recorrido inorden: ");
        inordenRec(raiz);
        System.out.println();
    }

    private void inordenRec(Nodo nodo) {
        if (nodo != null) {
            inordenRec(nodo.izquierda);
            System.out.print(nodo.valor + " ");
            inordenRec(nodo.derecha);
        }
    }

    // Buscar un valor en el árbol
    public boolean buscar(int valor) {
        return buscarRec(raiz, valor);
    }

    private boolean buscarRec(Nodo nodo, int valor) {
        if (nodo == null)
            return false;
        if (nodo.valor == valor)
            return true;
        if (valor < nodo.valor)
            return buscarRec(nodo.izquierda, valor);
        else
            return buscarRec(nodo.derecha, valor);
    }
}

// Clase principal con el menú
public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        ArbolBinario arbol = new ArbolBinario();
        int opcion, numero;

        do {
            System.out.println("\n=== MENÚ ÁRBOL BINARIO ===");
            System.out.println("1. Insertar número");
            System.out.println("2. Mostrar recorrido inorden");
            System.out.println("3. Buscar número");
            System.out.println("4. Salir");
            System.out.print("Seleccione una opción: ");
            opcion = sc.nextInt();

            switch (opcion) {
                case 1:
                    System.out.print("Ingrese el número a insertar: ");
                    numero = sc.nextInt();
                    arbol.insertar(numero);
                    System.out.println("Número insertado correctamente.");
                    break;

                case 2:
                    arbol.mostrarInorden();
                    break;

                case 3:
                    System.out.print("Ingrese el número a buscar: ");
                    numero = sc.nextInt();
                    if (arbol.buscar(numero)) {
                        System.out.println("✅ El número " + numero + " SÍ existe en el árbol.");
                    } else {
                        System.out.println("❌ El número " + numero + " NO existe en el árbol.");
                    }
                    break;

                case 4:
                    System.out.println("Saliendo del programa...");
                    break;

                default:
                    System.out.println("Opción no válida. Intente nuevamente.");
            }

        } while (opcion != 4);

        sc.close();
    }
}
